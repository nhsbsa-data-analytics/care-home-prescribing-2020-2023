---
title: "reviewing-text-changes"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{reviewing-text-changes}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(carehomes2)
```

## How text is included in the app

All text is written in markdown (note, __not__ Rmarkdown but just plain old [markdown](https://www.markdownguide.org/cheat-sheet/)). Initially this was tried with Rmarkdown, but this caused various issues that were not a problem with plain markdown.

The text markdown lives in the `inst/markdown` folder.

```{r}
list.files("../inst/markdown")
```
Usually there is a single file for each module of the app. This is because in general all the text is first in the module, and followed by the graphical components. Sometimes that is not the case. The module for metrics includes several tables interspersed in the text. We did try out using markdown created tables, but they did not look great. In the end we created them with `kable`.

Each markdown file is included in a modules UI function with the `includeMarkdown` function provided by `{shiny}`. You would think there would be an Rmarkdown version of this, but it seems there is not! This simply converts the markdown into HTML.

```{r}
cat(includeMarkdown("../inst/markdown/09_metrics_3.md"))
```
## The writing and review cycle

A common pain point for the team is the process of drafting, reviewing and 'coding' text. There can be many rounds of review and update before a final version of text is agreed. Adding text too early to the app increases the pain, as now the app text and review/draft document (commonly Word with track changes enabled) must be kept in sync. Failing to keep both sources in sync leads to changes being missed and just increases the overhead. At some point however, the text really does need to be added to the app. So there is always going to be some amount of having to juggle multiple sources of text. 
