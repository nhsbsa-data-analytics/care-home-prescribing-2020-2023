<h2 id="methodology-page-title">Methodology</h2>

Prescribing estimates are based on a sophisticated methodology which includes linking primary care prescription address data to care home addresses in [AddressBase Plus](https://www.ordnancesurvey.co.uk/business-government/products/addressbase) and [CQC data](https://anypoint.mulesoft.com/exchange/portals/care-quality-commission-5/4d36bd23-127d-4acf-8903-ba292ea615d4/cqc-syndication-1/). The address matching method has been made available as an R package named [<code>{<u>addressMatchR</u>}</code>](https://github.com/nhsbsa-data-analytics/addressMatchR). In addition, the R package [<code>{<u>nhsbsaR</u>}</code>](https://github.com/nhsbsa-data-analytics/nhsbsaR) is used. Many of the functions within the <code>{nhsbsaR}</code> and <code>{addressMatchR}</code> packages are scripted to work specifically with an Oracle database. The source code behind these functions may have to be edited for different database architectures, for them to work correctly.

A Single Line Address (SLA) data field was required for the first two matching stages. The <code>oracle_merge_strings</code> function from the <code>{nhsbsaR}</code> package aimed to generate a Single Line Address (SLA), by combining address components. This generated a SLA similar but not identical to that found in AB Core.

When SLA could not be exact matched, they were matched using the individual words (tokens) in the patient and lookup addresses. It was possible the same lookup token could be matched multiple times against different patient address tokens. In some instances, this may have exaggerated the similarity between two address strings.

Where address strings could not be matched between datasets, additional processes were applied to match the remaining records to care homes. One such method was to assume that any address, sharing a post code with a registered care home and with five or more patients aged 65 years and over receiving prescribing in a single month, could be categorised as a care home, with keyword exclusions applied to remove some property types such as hospitals. This approach enabled an additional 0.3 million prescription forms to be labelled as belonging to a care home in 2022/23, in addition to the 16.3 million forms initially labelled through address matching. This threshold of five patients, although appropriate in this instance, could potentially change in future analyses.

A final matching stage looked at key words appearing in recorded patient addresses (e.g. 'care home', 'residential home') and resulted in an additional 0.5 million prescription forms being labelled as belonging to a care home. The list of keywords for the matches, although appropriate in this instance, again could potentially change in future analyses. These keywords are described in the [full methodology](https://rpubs.com/nhsbsa-data-analytics/methodology) published on the RPubs website.

A comprehensive validation exercise estimated the overall accuracy of correctly classifying the patient address from a prescription for to a care home or otherwise at 99.6% for the 2020/21 data. With the methodology being consistent a similar level of accuracy can be expected for the 2021/22 and 2022/23 data. The validation only focused on false-positive matches. This was where a patient address record was incorrectly labelled as being a care home. No work was done to gauge the extent of false-negatives, namely patient address records that were care homes although not labelled as such. More information around validation accuracy estimates can be found within part 6 of the [full methodology](https://rpubs.com/nhsbsa-data-analytics/methodology).

This analysis addresses a key gap in knowledge and gives valuable insights which can inform the use and management of medicines in care homes to help improve health outcomes, quality of care and ensure value. __It should however be noted that data from the 2020/21 financial year was at the height of the COVID-19 pandemic and data from the 2021/22 financial year was toward the end of the pandemic.__ Prescribing patterns may change in subsequent years.

Patient count estimates are of care home residents aged 65 years and over __receiving prescriptions__. A care home resident that received no prescriptions would not appear in this data, meaning care home patient count estimates will be lower than the monthly actual care home population. These monthly estimates will be higher than 2021 Census estimates which are based on occupancy on Census day.

Throughout the project the NHSBSA ensured data was protected and secure and adhered to the Caldicott guardian principles.

The methodology is described in full on a [blog post on RPubs](https://rpubs.com/nhsbsa-data-analytics/methodology).
